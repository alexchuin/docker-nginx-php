merge_slashes off;

add_header "X-UA-Compatible" "IE=Edge,chrome=1";
add_header "P3P" "policyref=\"/w3c/p3p.xml\", CP=\"IDC DSP COR ADM DEVi TAIi PSA PSD IVAi IVDi CONi HIS OUR IND CNT\"";
add_header "Access-Control-Allow-Origin" "*";

add_header "Cache-Control" "no-store, no-cache, must-revalidate";
add_header "Pragma" "no-cache";
expires -1;

index index.html app.php;
root /srv/www/web;

location / {
    try_files $uri /app.php$is_args$args;
}

location ~ ^/(app|config)\.php(/|$) {
    fastcgi_pass php-dev;
    fastcgi_split_path_info ^(.+\.php)(/.*)$;
    include fastcgi_params;
    fastcgi_param APPLICATION_ENV dev;
    fastcgi_param SCRIPT_FILENAME $realpath_root$fastcgi_script_name;
    fastcgi_param DOCUMENT_ROOT $realpath_root;
}

# return 404 for all other php files not matching the front controller
# this prevents access to other php files you don't want to be accessible.
location ~ \.php$ {
  return 404;
}

location /_.gif {
    empty_gif;
}